# Ansible managed: Do NOT edit this file manually!
#### BEGIN SERVICE CONFIG ####
[SERVICE]
    Flush               5
    Daemon              Off
    Log_Level           info
    Parsers_File        parsers.conf
    Plugins_File        plugins.conf
#### SERVICE CONFIG     => BEGIN CUSTOM PARSERS ####
    Parsers_File        /etc/td-agent-bit/parsers.d/json_parsers.conf
#### SERVICE CONFIG     => END CUSTOM PARSERS   ####

#### SERVICE CONFIG     => BEGIN METRICS CONFIG ####
    HTTP_Server         Off
#### SERVICE CONFIG     => END METRICS CONFIG  ####
#### END SERVICE CONFIG   ####

#### BEGIN FILE INPUTS ####
[INPUT]
    Name                tail
    Path                /var/log/td_agent_bit.catchall/*.log
    Buffer_Chunk_Size   512k
    Buffer_Max_Size     5M
    DB                  /var/log/.flb-buffer/_all_.state
    DB.Sync             Normal
    Mem_Buf_Limit       56M
    Skip_Long_Lines     True
    Exclude_Path        *.log1
    Parser              json
    Tag                 catchall
[INPUT]
    Name                tail
    Path                /var/log/syslog
    Buffer_Chunk_Size   512k
    Buffer_Max_Size     5M
    DB                  /var/log/.flb-buffer/syslog.state
    DB.Sync             Normal
    Mem_Buf_Limit       56M
    Skip_Long_Lines     True
    Parser              syslog-rfc3164-local
    Tag                 syslog
#### END FILE INPUTS  ####

#### BEGIN CUSTOM INPUTS ####
[INPUT]
    Name                systemd
    Read_From_Tail      True
    Strip_Underscores   True
    Systemd_Filter      _SYSTEMD_UNIT=sshd.service
    Tag                 Trusty::*
#### END CUSTOM INPUTS  ####
#### BEGIN CUSTOM FILTERS ####
[FILTER]
    Interval            12s
    Match               THROTTLED.*
    Name                throttle
    Rate                60
    Window              5
[FILTER]
    Match               *
    Name                nest
    Nest_under          event
    Operation           nest
    Wildcard            *
[FILTER]
    Add                 index catchall
    Add                 sourcetype molecule:jlamendo.td_agent_bit
    Add                 host td_agent_bit.test
    Match               *
    Name                modify
[FILTER]
    Match               test
    Name                rewrite_tag
    Rule                $event.msg ^(NOISY_MESSAGE)$ THROTTLED.$TAG false
#### END CUSTOM FILTERS  ####

#### BEGIN CUSTOM LUA FILTERS ####
[FILTER]
    Name                  lua
    Match                 inject_host
    script                /etc/td-agent-bit/filters.d/custom_filter.lua
    call                  *
[FILTER]
    Name                  lua
    Match                 inject_index
    script                /etc/td-agent-bit/filters.d/custom_filter.lua
    call                  syslog.*
#### END CUSTOM LUA FILTERS  ####

#### BEGIN OUTPUTS ####
[OUTPUT]
    Host                splunk-molecule-non-existent.notldbythisname
    Match               *
    Name                splunk
    Port                443
    Splunk_Send_Raw     True
    Splunk_Token        xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
    TLS                 On
    TLS.Verify          On
#### END OUTPUTS  ####

#### BEGIN CUSTOM INCLUDES ####
@INCLUDE                /etc/td-agent-bit/includes/custom_include.conf
#### END CUSTOM INCLUDES  ####