# {{ ansible_managed }}
# This file was automatically generated by ansible-galaxy::jlamendo.td-agent-bit.
# It serves to automatically rotate a log file which was configured to be tailed by td-agent-bit, a log-collection agent.
"{{ item.path }}"

{
  {% if item.rotate_custom is defined %}
  {% for option in item.rotate_custom %}
  {{ option }}
  {% endfor %}
  {% else %}
  {{ item.rotate_interval | default(flb_rotate_interval) }}
  maxsize {{ item.rotate_size | default(flb_rotate_maxsize) }}
  rotate {{ item.rotate_retention | default(flb_rotate_retention) }}
  {{ item.rotate_strategy | default(flb_rotate_strategy) }}
  {% if item.rotate_missingok | default(flb_rotate_missingok) %}
  missingok
  {% endif %}
  {% endif %}
  
  {% if item.rotate_scripts is defined %}
  {% for name, script in item.scripts.items() %}
  {{ name }}
    {{ script }}
  endscript
  {% endfor %}
  {% elif flb_rotate_scripts is defined %}
  {% for name, script in flb_rotate_scripts.items() %}
  {{ name }}
    {{ script }}
  endscript
  {% endfor %}
  {% endif %}
}


